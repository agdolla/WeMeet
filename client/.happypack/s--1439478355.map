{"version":3,"sources":["app\\profile\\profileRecentPostItem.js"],"names":["moment","require","ProfileRecentPostItem","props","state","data","e","preventDefault","button","cb","likeCounter","setState","didUserLike","currentUser","_id","user","i","length","contents","type","Error","img","time","postDate","calendar","Date","getTime","fromNow","author","avatar","fullname","text","handleLikeClick","comments","Component"],"mappings":"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","file":"profileRecentPostItem.js","sourceRoot":"C:/Users/Vincent/Desktop/wemeet/client","sourcesContent":["import React from 'react';\r\nimport {likePost, unLikePost} from '../server';\r\n\r\nvar moment = require('moment');\r\n\r\nexport default class ProfileRecentPostItem extends React.Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = props.data;\r\n  }\r\n\r\n  handleLikeClick(e){\r\n    e.preventDefault();\r\n\r\n    if(e.button === 0){\r\n      var cb = (likeCounter) => {\r\n        this.setState({likeCounter:likeCounter});\r\n      };\r\n\r\n      if(!this.didUserLike(this.props.currentUser)){\r\n        likePost(this.state._id,this.props.currentUser,cb);\r\n      }\r\n      else{\r\n        unLikePost(this.state._id,this.props.currentUser,cb);\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  didUserLike(user) {\r\n    var likeCounter = this.state.likeCounter;\r\n\r\n    for (var i = 0; i < likeCounter.length; i++) {\r\n      if (likeCounter[i]._id === user)\r\n        return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render(){\r\n    var data = this.state;\r\n    var contents;\r\n    switch(data.type){\r\n      case \"general\":\r\n        contents = data.contents;\r\n        break;\r\n      default:\r\n        throw new Error(\"Unknown FeedItem: \" + data.type);\r\n    }\r\n\r\n    var img = <img src={contents.img} width=\"100%\" height=\"100%\" alt=\"\" />;\r\n\r\n    if(contents.img === null)\r\n      img = null;\r\n\r\n    var time = moment(contents.postDate).calendar();\r\n\r\n    if((new Date().getTime()) - contents.postDate <= 86400000)\r\n      time = moment(contents.postDate).fromNow();\r\n\r\n    return(\r\n      <div className=\"panel panel-default\">\r\n        <div className=\"panel-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-2\">\r\n              <img src={contents.author.avatar} height=\"50px\" alt=\"\" />\r\n            </div>\r\n            <div className=\"col-md-10\">\r\n              <div className=\"media\">\r\n                {contents.author.fullname}\r\n                <br />\r\n                {time}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"row content\">\r\n            <div className=\"panel-body\">\r\n              <div className=\"media\">\r\n                <div className=\"media-body\">\r\n                  <p>\r\n                    {contents.text}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"panel-body\">\r\n              <center>{img}</center>\r\n            </div>\r\n            <div className=\"panel-footer\">\r\n              <div className=\"row\">\r\n                <div className=\"col-md-12\">\r\n                  <a href=\"#\" onClick={(e)=>this.handleLikeClick(e)}><span className=\"glyphicon glyphicon-heart\"></span>{data.likeCounter.length}</a>\r\n                  <span className=\"glyphicon glyphicon-comment\"></span>{data.comments.length}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}