{"version":3,"sources":["app\\notification\\notificationBody.js"],"names":["Array","prototype","insert","index","item","splice","NotificationBody","props","state","FR","AN","user","notificationData","contents","map","notification","type","setState","id","getData","emit","authorization","sender","target","notificationid","length","fr","i","handleDelete","handleFriendAccept","activityid","userid","handleActivityAccept","Component"],"mappings":"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","file":"notificationBody.js","sourceRoot":"C:/Users/Vincent/Desktop/wemeet/client","sourcesContent":["import React from 'react';\r\nimport Request from './friendRequest';\r\nimport ActivityNotification from './activityNotification'\r\nimport {getNotificationData, deleteNotification,acceptFriendRequest,acceptActivityRequest} from '../server';\r\nimport {socket,getToken} from '../credentials';\r\n\r\nArray.prototype.insert = function (index, item) {\r\nthis.splice(index, 0, item);\r\n};\r\n\r\nexport default class NotificationBody extends React.Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      FR: [],\r\n      AN: []\r\n    }\r\n  }\r\n\r\n\r\n\r\n  getData(){\r\n    getNotificationData(this.props.user,(notificationData)=>{\r\n      var FR = [];\r\n      var AN = [];\r\n      notificationData.contents.map((notification)=>{\r\n        if(notification.type === \"FR\"){\r\n          FR.insert(\"0\",notification);\r\n        }\r\n        else{\r\n          AN.insert(\"0\",notification);\r\n        }\r\n      });\r\n      this.setState({\r\n        FR: FR,\r\n        AN: AN\r\n      });\r\n    })\r\n  }\r\n\r\n  handleDelete(id){\r\n    deleteNotification(id,this.props.user,()=>{\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  handleFriendAccept(id,user){\r\n    acceptFriendRequest(id,this.props.user,()=>{\r\n      this.getData();\r\n      socket.emit(\"friend request accepted\",{\r\n        authorization: getToken(),\r\n        sender: this.props.user,\r\n        target: user\r\n      });\r\n    });\r\n  }\r\n\r\n  handleActivityAccept(notificationid){\r\n    acceptActivityRequest(notificationid,this.props.user,()=>{\r\n      this.getData();\r\n    })\r\n  }\r\n\r\n  render(){\r\n    if(this.props.id == 1){\r\n      if(this.state.FR.length === 0){\r\n        return(\r\n          <div className=\"panel panel-default\">\r\n            <div className=\"panel-body\">\r\n                  Nothing here yet\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      return(\r\n        <div className=\"panel panel-default\">\r\n          <div className=\"panel-body\">\r\n            {this.state.FR.map((fr,i)=>{\r\n              return <Request key={i} data={fr} onDelete={(id)=>this.handleDelete(id)} onAccept={(id,user)=>this.handleFriendAccept(id,user)}/>\r\n            })}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n    else{\r\n      if(this.state.AN.length === 0){\r\n        return(\r\n          <div className=\"panel panel-default\">\r\n            <div className=\"panel-body\">\r\n              Nothing here yet\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      return(\r\n        <div className=\"panel panel-default\">\r\n          <div className=\"panel-body\">\r\n            {this.state.AN.map((AN,i)=>{\r\n              return <ActivityNotification key={i} data={AN} onDelete={(id)=>this.handleDelete(id)} onAccept={(activityid,userid)=>this.handleActivityAccept(activityid,userid)}/>\r\n            })}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getData();\r\n  }\r\n}\r\n"]}