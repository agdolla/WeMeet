{"version":3,"sources":["app\\settings\\settings.js"],"names":["alert","emailAlert","moment","require","Settings","props","state","userData","username","nickname","description","birthday","oldEmail","newEmail","img","cropperOpen","changeInfoFailed","fileTooLarge","fileWrongType","e","preventDefault","reader","FileReader","file","target","files","size","setState","type","match","onload","upload","result","readAsDataURL","value","dataURI","_id","userId","fullname","user","format","error","marginTop","handleRequestHide","handleCrop","handleUsername","handleNickname","handleBirthday","handleDescription","handleChangeUserInfo","handleOldEmail","handleNewEmail","handleEmailChange","border","width","height","handleFileClick","handleFile","handleAvatarChange","getData","Component"],"mappings":"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","file":"settings.js","sourceRoot":"C:/Users/Vincent/Desktop/wemeet/client","sourcesContent":["import React from 'react';\r\nimport Navbar from '../component/navbar';\r\nimport {getUserData,changeEmail,changeUserInfo,ChangeAvatar} from '../server';\r\nvar alert = null;\r\nvar emailAlert = null;\r\nvar moment = require('moment');\r\nimport AvatarCropper from \"react-avatar-cropper\";\r\nimport {hideElement} from '../util';\r\n\r\n\r\nexport default class Settings extends React.Component{\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      userData: {},\r\n      username:\"\",\r\n      nickname: \"\",\r\n      description: \"\",\r\n      birthday:\"\",\r\n      oldEmail:\"\",\r\n      newEmail:\"\",\r\n      img: null,\r\n      cropperOpen: false,\r\n      changeInfoFailed:false,\r\n      fileTooLarge:false,\r\n      fileWrongType:false\r\n    }\r\n  }\r\n\r\n  handleFile(e){\r\n    e.preventDefault();\r\n    // Read the first file that the user selected (if the user selected multiple\r\n    // files, we ignore the others).\r\n    var reader = new FileReader();\r\n    var file = e.target.files[0];\r\n    // Called once the browser finishes loading the image.\r\n    if(file.size > 1100000){\r\n      return this.setState({\r\n        fileTooLarge:true\r\n      })\r\n    }\r\n    else if(!file.type.match('image.*')){\r\n      return this.setState({\r\n        fileWrongType:true\r\n      })\r\n    }\r\n    reader.onload = (upload) => {\r\n      this.setState({\r\n        img: upload.target.result,\r\n        cropperOpen:true,\r\n        fileTooLarge:false,\r\n        fileWrongType:false\r\n      });\r\n    };\r\n\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  handleFileClick(e){\r\n    e.target.value = null;\r\n  }\r\n\r\n  handleRequestHide(e){\r\n    e.preventDefault();\r\n    this.setState({\r\n      cropperOpen: false,\r\n      img: null\r\n    })\r\n  }\r\n\r\n  handleCrop(dataURI) {\r\n    this.setState({\r\n      cropperOpen: false,\r\n      img: dataURI\r\n    });\r\n  }\r\n\r\n  handleAvatarChange(e){\r\n    e.preventDefault();\r\n    if(this.state.img !== null){\r\n      ChangeAvatar(this.state.userData._id,this.state.img,(userData)=>{\r\n        this.setState({userData: userData});\r\n      });\r\n    }\r\n  }\r\n\r\n  handleChangeUserInfo(e){\r\n    e.preventDefault();\r\n    if(this.state.username!==\"\"&&\r\n        this.state.nickname!==\"\"&&\r\n        this.state.description!==\"\"){\r\n          changeUserInfo({\r\n            userId: this.state.userData._id,\r\n            fullname:this.state.username,\r\n            nickname: this.state.nickname,\r\n            description: this.state.description,\r\n            birthday:this.state.birthday\r\n          },(userData)=>{\r\n            alert = <div className={\"alert alert-success alert-dismissible\"} role=\"alert\">\r\n              <strong>Change info succeed!</strong>\r\n            </div>\r\n            this.setState({\r\n              userData: userData,\r\n              changeInfoFailed:false\r\n            });\r\n          });\r\n        }\r\n        else{\r\n          alert = null;\r\n          this.setState({\r\n            changeInfoFailed:true\r\n          });\r\n        }\r\n\r\n  }\r\n\r\n  getData(){\r\n    getUserData(this.props.user,(userData)=>{\r\n        this.setState({\r\n          userData:userData,\r\n          username:userData.fullname,\r\n          nickname: userData.nickname,\r\n          description: userData.description,\r\n          birthday: moment(userData.birthday).format('YYYY-MM-DD')\r\n        });\r\n    });\r\n  }\r\n\r\n  handleUsername(e){\r\n    e.preventDefault();\r\n    this.setState({username: e.target.value});\r\n  }\r\n\r\n\r\n  handleNickname(e){\r\n    e.preventDefault();\r\n    this.setState({nickname: e.target.value});\r\n  }\r\n\r\n  handleDescription(e){\r\n    e.preventDefault();\r\n    this.setState({description: e.target.value});\r\n  }\r\n  handleBirthday(e){\r\n    e.preventDefault();\r\n    this.setState({birthday: e.target.value});\r\n  }\r\n  handleOldEmail(e){\r\n    e.preventDefault();\r\n    this.setState({oldEmail: e.target.value});\r\n  }\r\n  handleNewEmail(e){\r\n    e.preventDefault();\r\n    this.setState({newEmail: e.target.value});\r\n  }\r\n  handleEmailChange(e){\r\n      e.preventDefault();\r\n      if(this.state.oldEmail!==\"\" && this.state.newEmail!==\"\"){\r\n        changeEmail({\r\n          userId: this.state.userData._id,\r\n          oldEmail: this.state.oldEmail,\r\n          newEmail: this.state.newEmail\r\n        },(error)=>{\r\n          if(error){\r\n            emailAlert = (<div className=\"alert alert-warning\" role=\"alert\">\r\n                          <strong>Old email is wrong or new email has wrong format</strong>\r\n                        </div>);\r\n          }\r\n          else{\r\n            emailAlert = (<div className=\"alert alert-success\" role=\"alert\">\r\n                          <strong>Change email succeed!</strong>\r\n                        </div>);\r\n          }\r\n          this.setState({\r\n            oldEmail:\"\",\r\n            newEmail:\"\"\r\n          })\r\n        });\r\n      }\r\n      else{\r\n        emailAlert = (<div className=\"alert alert-warning\" role=\"alert\">\r\n                      <strong>Please fill in blanks</strong>\r\n                    </div>);\r\n      }\r\n\r\n      this.setState({\r\n        oldEmail:\"\",\r\n        newEmail:\"\"\r\n      })\r\n  }\r\n\r\n\r\n  render(){\r\n    return(\r\n      <div style={{marginTop:'70'}}>\r\n        {this.state.cropperOpen &&\r\n          <AvatarCropper\r\n            onRequestHide={(e)=>this.handleRequestHide(e)}\r\n            cropperOpen={this.state.cropperOpen}\r\n            onCrop={(e)=>this.handleCrop(e)}\r\n            image={this.state.img}\r\n            width={512}\r\n            height={512}\r\n            />\r\n        }\r\n        <Navbar user={this.state.userData}/>\r\n        <div className=\"container settings\">\r\n          <div className=\"row\">\r\n            <div className=\"col-md-7 col-md-offset-1 infos\">\r\n              <h4><span><i className=\"fa fa-cog\" aria-hidden=\"true\"></i></span> Settings</h4>\r\n              <div className=\"panel panel-default personal-info-1\">\r\n                <div className=\"panel-heading\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-12\">\r\n                      <h4>Personal Info</h4>\r\n                      <div>\r\n                        {alert}\r\n                        <div className={\"alert alert-warning alert-dismissible \"+hideElement(!this.state.changeInfoFailed)} role=\"alert\">\r\n                          <strong>Please fill in blanks</strong>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-md-12\">\r\n                          <div className=\"md-form\">\r\n                              <input type=\"text\" className=\"form-control\"\r\n                                value={this.state.username}\r\n                                onChange={(e)=>this.handleUsername(e)}/>\r\n                              <label className=\"shown\">Your name</label>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"row\">\r\n                        <div className=\"col-md-12\">\r\n                          <div className=\"md-form\">\r\n                              <input type=\"text\" id=\"\" className=\"form-control\"\r\n                                value={this.state.nickname}\r\n                                onChange={(e)=>this.handleNickname(e)}/>\r\n                              <label className=\"shown\">NickName</label>\r\n                          </div>\r\n                          <div className=\"md-form\">\r\n                            <h5>Birthday</h5>\r\n                            <input type=\"date\" id=\"\" className=\"form-control\"\r\n                              value={this.state.birthday}\r\n                              onChange={(e)=>this.handleBirthday(e)}\r\n                              placeholder=\"this\"/>\r\n                          </div>\r\n                          <div className=\"md-form\">\r\n                              <textarea type=\"text\" className=\"md-textarea\"\r\n                                value={this.state.description}\r\n                                onChange={(e)=>this.handleDescription(e)}></textarea>\r\n                              <label className=\"shown\">About you</label>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                </div>\r\n                <div className=\"panel-footer\">\r\n                  <div className=\"row\">\r\n                    <div className=\"col-md-12\">\r\n                      <button type=\"button\" className=\"btn btn-blue-grey pull-right\" name=\"button\"\r\n                        onClick={(e)=>this.handleChangeUserInfo(e)}>Save</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"col-md-3 system-settings\">\r\n              <div className=\"list-group\">\r\n                <a className=\"list-group-item\"data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#reset-password\" aria-expanded=\"true\" aria-controls=\"reset-password\">\r\n                  Change Password <span className=\"pull-right\"><i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>\r\n                </a>\r\n                <div id=\"reset-password\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingOne\">\r\n                  <div className=\"panel-body\">\r\n                    <div className=\"md-form\" style={{\"marginTop\":'20'}}>\r\n                        <input type=\"password\" id=\"\" className=\"form-control\"/>\r\n                        <label htmlFor=\"Form1\" className=\"\">Old password</label>\r\n                    </div>\r\n                    <div className=\"md-form\" style={{\"marginTop\":'20'}}>\r\n                        <input type=\"password\" id=\"\" className=\"form-control\"/>\r\n                        <label htmlFor=\"Form1\" className=\"\">New password</label>\r\n                    </div>\r\n                    <div className=\"md-form\" style={{\"marginTop\":'20'}}>\r\n                        <input type=\"password\" id=\"\" className=\"form-control\"/>\r\n                        <label htmlFor=\"Form1\" className=\"\">Repeat password</label>\r\n                    </div>\r\n                    <button type=\"button\" className=\"btn btn-blue-grey pull-right\" name=\"button\">Submit</button>\r\n                  </div>\r\n                </div>\r\n                <a className=\"list-group-item\"data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#reset-email\" aria-expanded=\"true\" aria-controls=\"reset-password\">\r\n                  Reset Email <span className=\"pull-right\"><i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>\r\n                </a>\r\n                <div id=\"reset-email\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingOne\">\r\n                  <div className=\"panel-body\">\r\n                    {emailAlert}\r\n                    <div className=\"md-form\" style={{\"marginTop\":'20'}}>\r\n                        <input type=\"email\" id=\"\" value={this.state.oldEmail}className=\"form-control\" onChange={(e)=>this.handleOldEmail(e)}/>\r\n                        <label htmlFor=\"Form1\" className=\"\">Old Email</label>\r\n                    </div>\r\n                    <div className=\"md-form\" style={{\"marginTop\":'20'}}>\r\n                        <input type=\"email\" id=\"\" value={this.state.newEmail} className=\"form-control\" onChange={(e)=>this.handleNewEmail(e)}/>\r\n                        <label htmlFor=\"Form1\" className=\"\">New Email</label>\r\n                    </div>\r\n                    <button type=\"button\" className=\"btn btn-blue-grey pull-right\" name=\"button\" onClick={(e)=>this.handleEmailChange(e)}>Submit</button>\r\n                  </div>\r\n                </div>\r\n\r\n                <a className=\"list-group-item\"data-toggle=\"collapse\" data-parent=\"#accordion\" href=\"#change-avatar\" aria-expanded=\"true\" aria-controls=\"reset-password\">\r\n                  Change Avatar <span className=\"pull-right\"><i className=\"fa fa-angle-right\" aria-hidden=\"true\"></i></span>\r\n                </a>\r\n\r\n                <div id=\"change-avatar\" className=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"headingOne\">\r\n                  <div className=\"panel-body\">\r\n                    <div className={\"alert alert-warning alert-dismissible \"+hideElement(!this.state.fileTooLarge)} role=\"alert\">\r\n                      <strong>File is too large</strong>\r\n                    </div>\r\n                    <div className={\"alert alert-warning alert-dismissible \"+hideElement(!this.state.fileWrongType)} role=\"alert\">\r\n                      <strong>File is not a image file</strong>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-8 col-md-offset-3\">\r\n                        <div className=\"btn-group\" role=\"group\">\r\n                          <label htmlFor=\"pic\">\r\n                            <a>\r\n                              <div className=\"thumbnail\" style={{\r\n                                  border: \"1px dashed black\",\r\n                                  width: \"100px\",\r\n                                  height: \"110px\"\r\n                                }}>\r\n                                <i className=\"fa fa-camera\" aria-hidden=\"true\"></i>\r\n                                <img src={this.state.img} className={hideElement(this.state.cropperOpen)}\r\n                                  width=\"100px\" height=\"100px\"/>\r\n                              </div>\r\n                            </a>\r\n                          </label>\r\n                          <input type=\"file\" accept=\".jpg,.jpeg,.png,.gif\" id=\"pic\" onClick={(e)=>this.handleFileClick(e)}\r\n                            onChange={(e)=>this.handleFile(e)}></input>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <button type=\"button\" className=\"btn btn-blue-grey pull-right\" name=\"button\"\r\n                      onClick={(e)=>this.handleAvatarChange(e)}>Submit</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount(){\r\n    this.getData();\r\n  }\r\n}\r\n"]}